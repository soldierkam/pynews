# -*- coding: utf-8 *-*
import threading

from nltk.util import trigrams as nltk_trigrams
from nltk.tokenize import word_tokenize as nltk_word_tokenize
from nltk.probability import FreqDist
from nltk.corpus.util import LazyCorpusLoader
from nltk.corpus.reader.api import CorpusReader
from nltk.corpus.reader.util import StreamBackedCorpusView, concat

#http://misja.posterous.com/language-detection-with-python-nltk
import unicodedata
from logger import logger
from boilerpipe.extract import Extractor

class LangIdCorpusReader(CorpusReader):
    '''
    LangID corpus reader
    '''
    CorpusView = StreamBackedCorpusView

    def _get_trigram_weight(self, line):
        '''
        Split a line in a trigram and its frequency count
        '''
        data = line.strip().split(' ')
        if len(data) == 2:
            return (unicodedata.normalize("NFC", unicode(data[1], "utf-8")), int(data[0]))

    def _read_trigram_block(self, stream):
        '''
        Read a block of trigram frequencies
        '''
        freqs = []
        for i in range(20): # Read 20 lines at a time.
            freqs.append(self._get_trigram_weight(stream.readline()))
        return filter(lambda x: x != None, freqs)

    def freqs(self, fileids=None):
        '''
        Return trigram frequencies for a language from the corpus
        '''
        return concat([self.CorpusView(path, self._read_trigram_block) for path in self.abspaths(fileids=fileids)])

class LangDetect(object):

    _instance = None
    _instanceMutex = threading.Semaphore()

    def __init__(self, languages=['nl', 'en', 'fr', 'de', 'es', 'th', 'pt', 'pl', "id", "ru", "it", "ru", "tr"]):
        logger.info("Build " + self.__class__.__name__ + " ... ")
        self.language_trigrams = {}
        self.langid = LazyCorpusLoader('langid', LangIdCorpusReader, r'(?!\.).*\.txt')
        self.__mutex = threading.Semaphore()
        for lang in languages:
            self.language_trigrams[lang] = FreqDist()
            for f in self.langid.freqs(fileids=lang+"-3grams.txt"):
                self.language_trigrams[lang].inc(f[0], f[1])
        logger.info("Build " + self.__class__.__name__ + ": done!")

    @staticmethod
    def instance():
        if LangDetect._instance is not None:
            return LangDetect._instance
        try:
            LangDetect._instanceMutex.acquire()
            if LangDetect._instance is None:
                LangDetect._instance = LangDetect()
            return LangDetect._instance
        finally:
            LangDetect._instanceMutex.release()

    def detect(self, text):
        '''
        Detect the text's language
        '''
        #print "Detect: " + text
        try:
            self.__mutex.acquire()
            if not text:
                raise ValueError(u"Text: " + unicode(text))
            text = unicodedata.normalize("NFC", text)
            words    = nltk_word_tokenize(text.lower())
            trigrams = {}
            scores   = dict([(lang, 0) for lang in self.language_trigrams.keys()])

            for match in words:
                word_trigrams = self.__get_word_trigrams(match)
                #print "Match: " + match
                #print "trigrams: " + str(word_trigrams)
                for trigram in word_trigrams:
                    if not trigram in trigrams.keys():
                        trigrams[trigram] = 0
                    trigrams[trigram] += 1

            total = sum(trigrams.values())

            for trigram, count in trigrams.items():
                for lang, frequencies in self.language_trigrams.items():
                    # normalize and add to the total score
                    try:
                        scores[lang] += (float(frequencies[trigram]) / float(frequencies.N())) * (float(count) / float(total))
                    except ZeroDivisionError as e:
                        logger.error(u"Div: " + unicode(float(frequencies.N())) + u" " + unicode(float(total)))
                        raise e

            sorted_scores = sorted(scores.items(), key=lambda x: x[1], reverse=True)
            #print sorted_scores
            logger.info(u"%s: %s" % (text, unicode(sorted_scores)))
            for lang, score in sorted_scores:
                if score > 0.0001:
                    return lang
            return None
        finally:
            self.__mutex.release()

    def __get_word_trigrams(self, match):
        return [''.join(trigram) for trigram in nltk_trigrams(match) if trigram != None]

class TwitterLangDetect():

    def __init__(self):
        self.__ld = LangDetect.instance()

    def detect(self, tweet):
        txt = tweet['text']
        urls = tweet['entities']['urls']
        mentions = tweet['entities']['user_mentions']
        hashtags = tweet['entities']['hashtags']
        media = tweet['entities']['media'] if 'media' in tweet['entities'] else []
        indices = [];
        self.__appendIndices(indices, urls)
        self.__appendIndices(indices, mentions)
        self.__appendIndices(indices, hashtags)
        self.__appendIndices(indices, media)
        indices = sorted(indices)
        txt = self.__filterIndices(indices, txt)
        txt = self.__filterRT(txt)
        #print "Without entities: " + txt
        return self.__ld.detect(txt)

    def __appendIndices(self, indices, entities):
        for e in entities:
            indices.append(e['indices'])

    def __filterIndices(self, indices, txt):
        removed = 0
        for ind in indices:
            start = ind[0]-removed
            end = ind[1]-removed
            txt = txt[:start] + txt[end:]
            removed += ind[1] - ind[0]
        return " ".join(txt.split())

    def __filterRT(self, txt):
        return " ".join(txt.split("RT"))

if __name__ == "__main__":
    ld = LangDetect.instance()
    for text in [u"sin tendencia politica,ya que nunca fui ni sere guevarista, despues de recorrer largos kilometros en moto como el che,conociendo la gente simple﻿ y real de cada lugar puedo darme cuenta lo equivocado que creci, gracias a las dos ",
                 u"I didn't know about motorcycle diaries, but in Belgium (where I live) it's used often as sondtrack for road trip﻿ programs on tv",
                 u"Подборка самых лучших фотографий из сети за месяц:",
                 u"10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433-2012-09-2609:48 AM\n\u062a\u0631\u0627\u062c\u0639 \u0644\u0644\u0645\u0631\u0643\u0632 \u0627\u0644\u062b\u0627\u0646\u064a.. \u0648\"\u064a\u0627\u0647\u0648\" \u0635\u0639\u062f \u0644\u0644\u0645\u0631\u0643\u0632 \u0627\u0644\u0631\u0627\u0628\u0639\n\u062d\u0645\u0644\u0627\u062a \u0627\u0644\u0645\u0642\u0627\u0637\u0639\u0629 \u062a\u064f\u0637\u064a\u062d \u0628\u0640 \"\u062c\u0648\u062c\u0644\" \u0645\u0646 \u0635\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0627\u0642\u0639 \u0627\u0644\u0639\u0627\u0644\u0645\u064a\u0629\n\u0639\u0628\u062f \u0627\u0644\u0644\u0647 \u0631\u0632\u064a\u0642\u064a- \u0633\u0628\u0642- \u0627\u0644\u0631\u064a\u0627\u0636:\u00a0 \u062a\u0631\u0627\u062c\u0639 \u0645\u062d\u0631\u0651\u0643 \u0627\u0644\u0628\u062d\u062b \u0627\u0644\u0639\u0645\u0644\u0627\u0642 \"\u062c\u0648\u062c\u0644\"\u060c \u0639\u0646 \u0635\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0627\u0642\u0639 \u0639\u0628\u0631 \u0627\u0644\u0639\u0627\u0644\u0645 \u0641\u064a \u0645\u0648\u0642\u0639 \"\u0623\u0644\u064a\u0643\u0633\u0627\"\u060c \u0628\u0639\u062f\u0645\u0627 \u0643\u0627\u0646 \u0645\u0646\u0630 \u0648\u0642\u062a \u0637\u0648\u064a\u0644 \u064a\u062d\u062a\u0644 \u0627\u0644\u0645\u0631\u062a\u0628\u0629 \u0627\u0644\u0623\u0648\u0644\u0649 \u0639\u0627\u0644\u0645\u064a\u0627\u064b.\n\u0648\u0623\u0635\u0628\u062d \u0627\u0644\u0645\u062d\u0631\u0643 \u0627\u0644\u0634\u0647\u064a\u0631 \u0641\u064a \u0627\u0644\u0645\u0631\u062a\u0628\u0629 \u0627\u0644\u062b\u0627\u0646\u064a\u0629 \u0644\u0644\u0645\u0648\u0627\u0642\u0639 \u0627\u0644\u0639\u0627\u0644\u0645\u064a\u0629\u060c \u0628\u064a\u0646\u0645\u0627 \u0635\u0639\u062f \u0645\u0648\u0642\u0639 \"\u0641\u064a\u0633 \u0628\u0648\u0643\" \u0644\u0644\u0645\u0631\u0643\u0632 \u0627\u0644\u0623\u0648\u0644\u060c \u0641\u064a\u0645\u0627 \u062c\u0627\u0621 \"\u064a\u0648\u062a\u064a\u0648\u0628\" \u0627\u0644\u0645\u0645\u0644\u0648\u0643 \u0644\u0634\u0631\u0643\u0629 \u062c\u0648\u062c\u0644 \u0641\u064a \u0627\u0644\u0645\u0631\u0643\u0632 \u0627\u0644\u062b\u0627\u0644\u062b\u060c \u0648\u0628\u0627\u0644\u062a\u0632\u0627\u0645\u0646 \u0645\u0639 \u0630\u0644\u0643 \u0635\u0639\u062f \u0645\u062d\u0631\u0643 \u0628\u062d\u062b \"\u064a\u0627\u0647\u0648\" \u0644\u0644\u0645\u0631\u0643\u0632 \u0627\u0644\u0631\u0627\u0628\u0639.\n\u00a0\u0648\u0639\u0632\u0627 \u0643\u062b\u064a\u0631 \u0645\u0646 \u0627\u0644\u0645\u0631\u0627\u0642\u0628\u064a\u0646 \u0647\u0630\u0627 \u0627\u0644\u062a\u0631\u0627\u062c\u0639 \u0644\u0640 \"\u062c\u0648\u062c\u0644\"\u060c \u0625\u0644\u0649 \u062d\u0645\u0644\u0627\u062a \u0627\u0644\u0645\u0642\u0627\u0637\u0639\u0629 \u0644\u0647 \u0641\u064a \u0628\u0639\u0636 \u0627\u0644\u062f\u0648\u0644 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u062d\u062a\u062c\u0627\u062c\u0627\u064b \u0639\u0644\u0649 \u0639\u062f\u0645 \u062d\u0630\u0641 \u0625\u062f\u0627\u0631\u062a\u0647 \u0627\u0644\u0641\u064a\u0644\u0645 \u0627\u0644\u0645\u064f\u0633\u064a\u0621 \u0644\u0644\u0631\u0633\u0648\u0644 \u0645\u062d\u0645\u062f \"\u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064a\u0647 \u0648\u0633\u0644\u0645\"\u060c \u0648\u0627\u0644\u0630\u064a \u0623\u064f\u0646\u062a\u062c \u0641\u064a \u0623\u0645\u0631\u064a\u0643\u0627 \u0623\u062e\u064a\u0631\u0627\u064b.\n\u00a0\n\u062d\u062c\u0632 \u0627\u0633\u0645\u0643\u0645 \u0627\u0644\u0645\u0633\u062a\u0639\u0627\u0631 \u0633\u064a\u062d\u0641\u0638 \u0644\u0643\u0645 \u0634\u062e\u0635\u064a\u062a\u0643\u0645 \u0627\u0644\u0627\u0639\u062a\u0628\u0627\u0631\u064a\u0629 \u0648\u064a\u0645\u0646\u0639 \u0627\u0644\u0622\u062e\u0631\u064a\u0646 \u0645\u0646 \u0627\u0646\u062a\u062d\u0627\u0644\u0647 \u0641\u064a \u0627\u0644\u062a\u0639\u0644\u064a\u0642\u0627\u062a\n\u0627\u0644\u062a\u0639\u0644\u064a\u0642\u0627\u062a (455)\n\u0631\u062a\u0628 : \u0627\u0644\u0623\u0642\u062f\u0645 | \u0627\u0644\u0623\u062d\u062f\u062b | \u0627\u0644\u0623\u062d\u062f\u062b \u062d\u0633\u0628 \u0627\u0644\u0631\u062f | \u0627\u0644\u0623\u0643\u062b\u0631 \u0625\u0639\u062c\u0627\u0628\u0627\u064b |\n\u062a\u0645 \u0627\u0644\u0631\u062f \u0639\u0644\u064a\u0647\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:49 AM\n\u0643\u0641\u0648 \u064a\u0627 \u0645\u062d\u0628\u064a \u0631\u0633\u0648\u0644 \u0627\u0644\u0644\u0647\n[382] - [2]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:51 AM\n\u0643\u0641\u0648 \u0627\u0644\u0649 \u0627\u0644\u0627\u0645\u0627\u0645\n3 \u0632\u0644\u0641\u0622\u0648\u064a\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:50 AM\n\u064a\u0622 \u0623\u062e\u0648\u0622\u0646 \u0627\u0646\u062a\u0645 \u0646\u0627\u0633\u064a\u0646 \u062b\u0642\u0627\u0641\u0629 \u0627\u0644\u0645\u0642\u0627\u0637\u0639\u0647 \u0648\u0647\u064a \u0633\u0628\u0628 \u062a\u0631\u0622\u062c\u0639 \u062f\u0648\u0644 \u0648\u0633\u0642\u0648\u0637 \u062d\u0643\u0622\u0645 \u0643\u064a\u0641 \u0628\u0623\u0634\u064a\u0627\u0621 \u0628\u0633\u064a\u0637\u0647 \u0648\u0639\u0627\u062f\u064a\u0647 . .  \u0628\u0627\u0644\u0631\u063a\u0645 \u0642\u0644\u0629 \u0627\u0644\u0645\u0642\u0627\u0637\u0639\u064a\u0646 \u0644\u0642\u0648\u0642\u0644 \u0625\u0644\u0622 \u0625\u0646\u0647 \u0623\u062b\u0631\u0631 \u0641\u064a \u0627\u0644\u062a\u0642\u064a\u064a\u0645\u0645 . . \u0627\u0644\u0644\u0647 \u0639\u0644\u064a\u0643\u0645\u0645\u0645\n[187] - [0]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:51 AM\n\u064a\u0627\u0631\u0628 \u0641\u064a \u062e\u0633\u0627\u0631\u0629 \u062f\u0627\u064a\u0645\u0629 \u0642\u0648\u0642\u0644\n[127] - [1]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:51 AM\n\u062d\u0633\u0628\u0646\u0627 \u0627\u0644\u0644\u0647 \u0648\u0646\u0639\u0645 \u0627\u0644\u0648\u0643\u064a\u0644\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:52 AM\n\u0642\u0648\u0645 \u062a\u0639\u0627\u0648\u0646\u0648\u0627 \u0645\u0627 \u0630\u0644\u0648\u0627\n7 sl7\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:53 AM\n\u0641\u064a \u0638\u0644 ( \u0627\u0644\u062a\u062d\u0641\u0638 ) \u0639\u0644\u0649 \u0627\u0644\u062a\u0639\u0628\u064a\u0631 \u0639\u0646 \u0627\u0644\u0641\u0644\u0645 \u0627\u0644\u0645\u0633\u064a\u0621 \u0644\u0627 \u0646\u0645\u0644\u0643 \u0627\u0644\u0627 \u0627\u0646 \u0646\u0631\u0641\u0639 \u0627\u0644\u0642\u0628\u0639\u0647 \u0644\u0643\u0644 \u0645\u0646 \u0642\u0627\u0637\u0639 \u0642\u0648\u0642\u0644\n[93] - [0]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:53 AM\n\u062a\u0648\u0647\u0645 \u0645\u0627 \u0634\u0627\u0641\u0648 \u0634\u0626\n\u0646\u062d\u0646\u0627 \u0645\u0646 \u064a\u0646\u0635\u0631 \u062f\u064a\u0646\u0646\u0627 \u0648\u0631\u0633\u0648\u0644\u0646\u0627 \u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064a\u0647 \u0648\u0633\u0644\u0645\n\u062e\u0644\u0647\u0645 \u064a\u0639\u0631\u0641\u0648\u0646\u0646\u0627 \u0639\u0646 \u0642\u0631\u0628 \u0645\u0627\u0630\u0627 \u0641\u0639\u0644\u0646\u0627 \u0645\u0646 \u0627\u062c\u0644 \u0646\u0635\u0631\u0629 \u0631\u0633\u0648\u0644 \u0627\u0644\u0644\u0647 \u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064a\u0647 \u0648\u0633\u0644\u0645\n[69] - [3]\n9 haytoohay\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:53 AM\n\u0627\u0647\u0645 \u0634\u064a \u0627\u0644\u0627\u0633\u062a\u0645\u0631\u0627\u0631 \u0641\u064a \u0627\u0644\u0645\u0642\u0627\u0637\u0639\u0647... \u0648\u0646\u0634\u0631\u0647\u0627 \u0628\u064a\u0646 \u0627\u0644\u0646\u0627\u0633 \u0643\u062b\u0642\u0627\u0641\u0647 \u0639\u0642\u0627\u0628\u064a\u0647 \u0644\u0643\u0644 \u0645\u0646 \u062a\u0633\u0648\u0644 \u0644\u0647 \u0646\u0641\u0633\u0647 \u0628\u0627\u0644\u0645\u0633\u0627\u0633 \u0628\u062f\u064a\u0646\u0646\u0627 \u0627\u0648 \u0645\u0639\u064a\u0634\u062a\u0646\u0627\n[55] - [0]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:54 AM\n\u0644\u0622\u0625\u0644\u0647 \u0627\u0644\u0651\u0622 \u0627\u0644\u0644\u0647 \u2018 \u0642\u0642\u0644 \u062c\u0622\u0621 \u0627\u0644\u062d\u0642\u0651 \u0648\u0632\u0647\u0647\u0642 \u0627\u0644\u0628\u0622\u0637\u0644 \u0625\u0646\u0651 \u0627\u0644\u0628\u0622\u0637\u0644 \u0643\u0622\u0646 \u0632\u0647\u0648\u0642\u0622\n[38] - [0]\n11 &\u0627\u0645 \u0627\u0644\u0641\u0631\u0633\u0627\u0646&\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:54 AM\n\u0627\u0646\u0627 \u0627\u0639\u062a\u0645\u062f\u062a \u064a\u0627\u0647\u0648 \u0645\u0639 \u0627\u0646 \u062c\u0648\u062c\u0644 \u0643\u0627\u0646 \u0645\u0641\u0636\u0644 \u0644\u0643\u0646 \u064a\u0633\u062a\u0627\u0647\u0644 \u0648\u0645\u0646 \u062e\u0633\u0627\u0631\u0647 \u0641\u064a \u062e\u0633\u0627\u0631\u0647 \u0627\u0646 \u0634\u0627\u0644\u0644\u0647\n[55] - [0]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:54 AM\n\u062d\u064a\u0644 \u0627\u0644\u0644\u0647 \u0623\u0642\u0648\u0649\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:54 AM\n\u0645\u0627 \u0627\u062a\u0648\u0642\u0639 \u0627\u0644\u0645\u0642\u0627\u0637\u0639\u0629 \u0644\u0647\u0627 \u062f\u062e\u0644 \u0628\u0646\u0632\u0648\u0644 \u0627\u0644\u062a\u0631\u062a\u064a\u0628\n\u0627\u0644\u0622\u0646 \u0627\u0644\u0646\u0627\u0633 \u0645\u0627\u0635\u0627\u0631\u062a \u062a\u062e\u0634 \u0642\u0648\u0642\u0644 \u0644\u0627\u0646 \u0627\u0635\u0644\u0627 \u063a\u0627\u0644\u0628\u0627 \u0646\u0641\u0633 \u0627\u0644\u0645\u0648\u0627\u0642\u0639 , \u064a\u0639\u0646\u064a \u0627\u0630\u0627 \u0627\u0646\u0627 \u0628\u0627\u062f\u062e\u0644 \u0633\u0628\u0642 \u0645\u0627 \u0627\u0628\u062d\u062b \u0639\u0646 \u0633\u0628\u0642 \u0628\u0642\u0648\u0642\u0644 \u0639\u0644\u0649 \u0637\u0648\u0644 \u0627\u0643\u062a\u0628 \u0627\u0644\u0631\u0627\u0628\u0637 \u0648\u0627\u062f\u062e\u0644 \u0633\u0628\u0642\n[4] - [90]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:54 AM\n\u0627\u0644\u062d\u0645\u062f\u0644\u0644\u0647 \u0648\u0639\u0642\u0628\u0627\u0644 \u0645\u0627 \u064a\u0635\u064a\u0631 \u0641\u064a \u0627\u0644\u0645\u0631\u062a\u0628\u0629 \u0627\u0644\u0627\u062e\u064a\u0631\u0647 \u0648\u064a\u062e\u0633\u0631 \u0643\u0645\u0627\u0646 \u064a\u0627 \u0631\u0628\n[40] - [0]\n15 \u0633\u0627\u0644\u0645 \u0633\u0639\u064a\u062f\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:55 AM\n\u0639\u0644\u0649 \u0641\u0643\u0631\u0629 \u0627\u0644\u0646\u062a\u064a\u062c\u0629 \u0647\u0630\u0647 \u0642\u0628\u0644 \u0627\u0644\u0645\u0642\u0627\u0637\u0639\u0629 \u064a\u0639\u0646\u064a \u0645\u0648 \u0646\u062d\u0646 \u0627\u0644\u0633\u0628\u0628 \u0648 \u0627\u062d\u0635\u0627\u0626\u064a\u0627\u062a \u0642\u0648\u0642\u0644 \u062a\u062b\u0628\u062a \u0627\u0646 \u0627\u0644\u0641\u064a\u0633\u0628\u0648\u0643 \u0645\u062a\u0642\u062f\u0645 \u0645\u0646 \u0639\u062f\u0629 \u0634\u0647\u0648\u0631\n[11] - [59]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:56 AM\n\u0642\u0627\u0637\u0639\u0648\u0647\u0645 .... \u064a\u062d\u062a\u0631\u0645\u0648\u0648\u0648\u0643\u0645\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:56 AM\n\u0627\u0642\u0633\u0645 \u0628\u0627\u0644\u0644\u0647 \u0627\u0646\u064a \u063a\u064a\u0631\u062a \u0645\u062d\u0631\u0643 \u0627\u0644\u0628\u062d\u062b \u0627\u0644\u064a \u0639\u0646\u062f\u064a \u0645\u0646 \u0642\u0648\u0642\u0644 \u0644\u064a\u0627\u0647\u0648\n\u0648\u0627\u062a\u0645\u0646\u0649 \u0627\u0646\u062a\u0645 \u062a\u0633\u0648\u0646\u0647\u0627 \u0645\u062b\u0644\u064a \u0647\u0630\u0627 \u0627\u0642\u0644 \u0634\u064a \u0646\u0633\u0648\u064a\u0647 \u0644\u0646\u0635\u0631\u0647 \u0644\u062d\u0628\u064a\u0628\u0646\u0627 \u0645\u062d\u0645\u062f \u0635\u0644 \u0627\u0644\u0644\u0647 \u0639\u0644\u064a\u0647 \u0648\u0633\u0644\u0645 \u0648\u062e\u0644\u064a\u0647\u0645 \u064a\u062e\u064a\u0633\u0648\u0648\u0648\u0648\u0648\u0648\u0648\u0648\u0648\u0648\n[51] - [0]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:57 AM\n\u0643\u0645 \u0627\u0646\u062a \u0631\u0627\u0626\u0639 \u0627\u064a\u0647\u0627 \u0627\u0644\u0634\u0639\u0628 \u0627\u0644\u0627\u0633\u0644\u0627\u0645\u064a \u0639\u0646\u062f\u0645\u0627 \u062a\u0631\u064a\u062f\u062f \u0634\u064a \u062a\u0641\u0639\u0644\u0629 \u0648\u062a\u062a\u062d\u0643\u0645 \u0628\u0643\u0644 \u0634\u064a\n[26] - [0]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:58 AM\n\u0644\u0627\u0632\u0645 \u0646\u0633\u062a\u0645\u0631 \u062d\u062a\u0649 \u064a\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0641\u0644\u0645 .. \u0627\u0644\u0634\u0643\u0631 \u0644\u0643\u0644 \u0645\u0646 \u0634\u0627\u0631\u0643 \u0628\u062d\u0645\u0644\u0629 \u0627\u0644\u0645\u0642\u0627\u0637\u0639\u0647\n[26] - [0]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:58 AM\n\u0639\u0633\u0627\u0647\u0627 \u0627\u0644\u062f\u0645\u0627\u0631 \u0643\u0644\u0647\u0627 \u062c\u0645\u064a\u0639 \u0627\u0630\u0627 \u0627\u0633\u062a\u062e\u062f\u0645\u062a \u0628\u0627\u0644\u0627\u0633\u0627\u0647\n\u0648\u0627\u0637\u0644\u0628 \u0645\u0646 \u0627\u0644\u0644\u0647 \u062f\u0645\u0627\u0631\u0647\u0627 \u0639\u0627\u062c\u0644 \u063a\u064a\u0631 \u0627\u062c\u0644\n*_\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:58 AM\n\u0627\u0644\u062d\u0645\u062f \u0644\u0644\u0647 \u0631\u0628 \u0627\u0644\u0639\u0627\u0644\u0645\u064a\u0646..\n\u0627\u0646\u0627 \u0627\u062a\u0635\u0641\u062d \u0639\u0628\u0631 \u0628\u0631\u0646\u0627\u0645\u062c \u0641\u0627\u064a\u0631 \u0641\u0648\u0643\u0633\n[14] - [3]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:59 AM\n\u0642\u0627\u0637\u0639\u0648\u0647\u0645 \u064a\u0627 \u0644\u0645\u0646 \u0627\u0634\u062a\u0627\u0642 \u0631\u0633\u0648\u0644 \u0627\u0644\u0644\u0647 \u0623\u0641\u0636\u0644 \u0627\u0644\u0628\u0634\u0631 \u0644\u0631\u0624\u064a\u062a\u0647\u0645\n\u0627\u0646\u0627 \u0628\u062f\u0644\u062a \u0635\u0641\u062d\u062a\u064a \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629 \u0645\u0646 \u062c\u0648\u062c\u0644 \u0627\u0644\u0649 \u0647\u0648\u062a\u0645\u064a\u0644\n[17] - [0]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:59 AM\n\u062a\u0643\u0641\u0648\u0648\u0648\u0646 \u0634\u0627\u0631\u0643\u0648\u0627 \u062c\u0645\u064a\u0639\u0627\u064b \u0641\u064a \u0627\u0644\u0645\u0642\u0627\u0637\u0639\u0629_ \u0647\u0630\u0627 \u0623\u0642\u0644 \u0634\u064a \u0646\u0642\u062f\u0631 \u0646\u0633\u0648\u064a\u0647\n[20] - [0]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:59 AM\n\u0644\u0646\u0627 \u0627\u0644\u0641\u062c\u0631 \u0627\u0644\u0642\u0627\u062f\u0645 \u0625\u0646 \u0634\u0627\u0621 \u0627\u0644\u0644\u0647 \u0645\u062b\u0644 \u0645\u0627 \u0643\u0627\u0646 \u0644\u0646\u0627 \u0627\u0644\u0645\u0627\u0636\u064a \u0627\u0644\u0632\u0627\u0647\u0631,,,\n\u0644\u0627\u0647\u0646\u062a\u0648\u0627...\u0634\u0643\u0631\u0627\u064b.\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 10:00 AM\n\u0627\u0633\u062a\u0645\u0631\u0648\u0627 \u064a\u0627\u0645\u0633\u0644\u0645\u064a\u0646 ..\n\u0641\u0647\u064a \u062d\u0631\u0628 \u0625\u0639\u0644\u0627\u0645\u064a\u0629 \u0623\u0643\u062b\u0631 \u0645\u0646 \u0623\u0646\u0647\u0627 \u062d\u0631\u0628 \u0639\u0644\u0649 \u0623\u0631\u0636 \u0627\u0644\u0648\u0627\u0642\u0639 !!\n\u0625\u0644\u0649 \u0627\u0644\u0623\u0645\u0627\u0645 .. \u062e\u0644\u0648\u0646\u0627 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644 \u0641\u064a \u0632\u0645\u0646\u0646\u0627 \u0647\u0630\u0627 \u0646\u0646\u062a\u0635\u0631 \u0648\u0644\u0648 \u0641\u064a \u0627\u0644\u062d\u0631\u0628 \u0627\u0644\u0625\u0639\u0644\u0627\u0645\u064a\u0629 !!\n[22] - [0]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 09:59 AM\n\u0648\u064a\u0646 \u0627\u0644\u0644\u064a \u064a\u0635\u0645\u0644\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 10:00 AM\n\u0627\u0644\u0642\u0648\u0644 \u0642\u0648\u0644 \u0627\u0644\u0635\u0648\u0627\u0631\u0645 \u0643\u064a \u062a\u0633\u062a\u0631\u062f \u0627\u0644\u0645\u0638\u0627\u0644\u0645\n\u062d\u062a\u0649 \u0627\u0644\u0623\u0631\u0627\u0630\u0644 \u0633\u0627\u0645\u0648\u0627 \u0631\u0633\u0648\u0644 \u0623\u0647\u0644 \u0627\u0644\u0639\u0632\u0627\u0626\u0645\n\u0645\u0627 \u062f\u0646\u0633\u0648\u0627 \u0644\u062d\u0645\u0627\u0646\u0627 \u0644\u0648 \u0637\u0648\u0642\u062a\u0647 \u0627\u0644\u0636\u0631\u0627\u063a\u0645\n\u062d\u062b\u0627\u0644\u0629 \u0627\u0644\u0628\u063a\u064a \u0635\u0627\u0644\u062a \u0641\u0623\u064a\u0646 \u0639\u0647\u062f \u0627\u0644\u062d\u0648\u0627\u0633\u0645\n\u0646\u0633\u0648\u0627 \u0628\u0623\u0646\u0627 \u0623\u0628\u0627\u0629 \u0646\u0630\u0648\u062f \u0630\u0648\u062f \u0627\u0644\u0642\u0634\u0627\u0639\u0645\n\u0646\u062d\u0646 \u0627\u0644\u0630\u064a\u0646 \u0648\u0637\u0626\u0646\u0627 \u0628\u0627\u0644\u062e\u064a\u0644 \u0639\u0631\u0634 \u0627\u0644\u0623\u0639\u0627\u062c\u0645\n\u0646\u062d\u0646 \u0627\u0644\u0630\u064a\u0646 \u0628\u0646\u064a\u0646\u0627 \u062d\u0635\u0648\u0646\u0646\u0627 \u0645\u0646 \u062c\u0645\u0627\u062c\u0645\n\u0633\u0642\u0646\u0627 \u062d\u0644\u064a\u0644\u0627\u062a \u0643\u0633\u0631\u0649 \u0628\u0627\u0644\u0633\u0648\u0637 \u0633\u0648\u0642 \u0627\u0644\u063a\u0646\u0627\u0626\u0645\n\u0631\u0633\u0648\u0644\u0646\u0627 \u0645\u0646 \u0635\u0646\u0639\u0646\u0627 \u0628\u0646\u0627\u0629 \u0645\u062c\u062f \u0627\u0643\u0627\u0631\u0645\n\u0631\u0633\u0648\u0644\u0646\u0627 \u0634\u0645\u0633 \u062d\u0642 \u0623\u0636\u0627\u0621 \u0648\u062c\u0647 \u0627\u0644\u0639\u0648\u0627\u0644\u0645\n\u0623\u0646\u0627\u0631 \u0645\u0634\u0643\u0627\u0629 \u0644\u064a\u0644 \u0645\u0646 \u0627\u0644\u0636\u0644\u0627\u0644\u0627\u062a \u0642\u0627\u062a\u0645\n\u0648\u0635\u0627\u063a \u0645\u0646 \u0628\u0639\u0636 \u0642\u0648\u0645 \u062c\u064a\u0644\u0627\u064b \u0645\u0639 \u0627\u0644\u0641\u062c\u0631 \u0642\u0627\u062f\u0645\n\u0641\u062d\u0637\u0645\u0648\u0627 \u0631\u0623\u0633 \u0628\u0627\u063a \u0648\u0630\u0644\u0644\u0648\u0627 \u0643\u0644 \u0638\u0627\u0644\u0645\n\u062d\u0631\u0628\u0627\u064b \u0639\u0644\u0649 \u0643\u0644 \u062d\u0631\u0628 \u0633\u0644\u0645\u0627\u064b \u0644\u0643\u0644 \u0645\u0633\u0627\u0644\u0645\n\u0648\u0627\u0644\u064a\u0648\u0645 \u0630\u0644\u062a \u0631\u0624\u0648\u0633 \u0648\u0623\u0630\u0639\u0646\u062a \u0643\u0627\u0644\u0633\u0648\u0627\u0626\u0645\n\u062a\u0628\u0627\u064b \u0648\u062a\u0628\u0627\u064b \u0644\u0630\u0644 \u0623\u0642\u0627\u0645 \u0641\u064a\u0646\u0627 \u0627\u0644\u0645\u0622\u062a\u0645\n\u0641\u0627\u0633\u062a\u0623\u0633\u062f \u0627\u0644\u0628\u063a\u0644 \u0644\u0645\u0627 \u062e\u0628\u062a \u0631\u0624\u0648\u0633 \u0627\u0644\u0636\u064a\u0627\u063a\u0645\n\u0648\u0632\u0645\u062c\u0631 \u0627\u0644\u0642\u0631\u062f \u064a\u0631\u0645\u064a \u0631\u0633\u0648\u0644\u0646\u0627 \u0628\u0627\u0644\u0634\u062a\u0627\u0626\u0645\n\u0645\u0627 \u0639\u0627\u062f \u0641\u064a \u0627\u0644\u0639\u064a\u0634 \u062e\u064a\u0631 \u0625\u0646 \u0623\u0644\u062c\u0645\u062a\u0646\u0627 \u0627\u0644\u0628\u0647\u0627\u0626\u0645\n[33] - [1]\n28 \u0645\u063a\u0640\u0640\u0627\u0637\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 10:02 AM\n\u0645\u0627\u062a\u0648\u0642\u0639 \u0645\u0646 \u0627\u0644\u062d\u0645\u0644\u0629  \u062a\u0631\u0627\u062c\u0639  \u0644\u0644\u0645\u0631\u0643\u0632  \u0627\u0644\u062b\u0627\u0646\u064a  \u060c  \u0644\u0633\u0627 \u0645\u0627\u0639\u0646\u062f\u0646\u0627 \u062b\u0642\u0627\u0641\u0647 \u0627\u0644\u0645\u0642\u0627\u0637\u0639\u0647 \u0628\u0634\u0643\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628 \u060c \u0628\u0633  \u062e\u0628\u0631  \u064a\u0639\u062a\u0628\u0631 \u0645\u0641\u0631\u062d .\n[5] - [22]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 10:01 AM\n\u0645\u0627\u064a\u0643\u0641\u064a \u064a\u0643\u0648\u0646 \u0627\u0644\u0645\u0631\u062a\u0628\u0647 \u0627\u0644\u062b\u0627\u0646\u064a\u0647.. \u0646\u0628\u064a\u0647 \u064a\u0646\u0632\u0644\n[31] - [0]\n30 \u0647\u062f\u0649 \u0627\u0644\u062c\u062d\u0648\u0628\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 10:02 AM\n\u0643\u0644\u0627\u0645 \u0641\u0627\u0636\u064a\u060c \u0623\u0635\u0644\u0627 \u0642\u0648\u0642\u0644 \u0648\u0644\u0627 \u0633\u0627\u0626\u0644\u0629 \u0641\u064a\u0643\u0645...\u0643\u0644\u0643\u0645 \u0643\u0645 \u0645\u0644\u064a\u0648\u0646... \u0644\u0645\u0627 \u0627\u0644\u0635\u064a\u0646 \u0642\u0631\u0631\u062a \u062a\u062d\u0638\u0631 \u0642\u0648\u0642\u0644 ... \u0642\u0648\u0642\u0644 \u0642\u0627\u0644\u0648\u0627 \u0644\u0647\u0645 \u0643\u064a\u0641\u0643\u0645....\u064a\u0639\u0646\u064a \u0645\u0628 \u0645\u0633\u0648\u064a\u0646 \u0644\u0643\u0645 \u0633\u0627\u0644\u0641\u0629\n[4] - [52]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 10:02 AM\n\u0627\u0643\u064a\u062f \u0627\u0643\u064a\u062f \u0648\u0631\u0627 \u0647\u0630\u0627 \u0627\u0644\u0645\u0648\u0636\u0648\u0639 \u0627\u0644\u0627\u062c\u0627\u0646\u0628\n\u0627\u0635\u0644\u0627 \u0627\u0644\u0627\u062c\u0627\u0646\u0628 \u0647\u0645\u0627 \u0627\u0644\u0634\u0645\u0627\u0639\u0629 \u0627\u0644\u062a\u064a \u0646\u0639\u0644\u0642 \u0639\u0644\u064a\u0647\u0627 \u0641\u0634\u0644\u0646\u0627\n\u0647\u0647\u0647\u0647\u0647\u0647\u0647\u0647\u0647\u0647\u0647\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 10:03 AM\n\u064a\u0633\u062a\u0627\u0647\u0644 \u0648\u0639\u0642\u0628\u0627\u0644 \u0645\u0627 \u064a\u062a\u0642\u0641\u0644 \u0627\u0644\u0645\u0648\u0642\u0639 \u0634\u062f\u0648\u0627 \u062d\u064a\u0644\u0643\u0645 \u064a\u0627 \u0623\u0645\u0629 \u0627\u0644\u0631\u0633\u0648\u0644\n[23] - [0]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 10:04 AM\n\u0627\u0644\u062d\u0645\u062f \u0644\u0644\u0647 .\n\u0648\u0644\u0648 \u0633\u0646\u062d \u0644\u0646\u0627 \u0627\u0644\u0645\u062c\u0627\u0644 \u0644\u0642\u062f\u0645\u0646\u0627 \u0623\u0643\u062b\u0631 \u0641\u062f\u0627\u0621 \u0644\u0646\u0628\u064a\u0646\u0627 \u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064a\u0647 \u0648\u0633\u0644\u0645.\n[11] - [0]\n34 \u0641\u064a \u0643\u0644 \u0634\u0639\u0628 \u0628\u0646\u0648 \u0633\u0639\u062f\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 10:04 AM\n\u062c\u0645\u064a\u064a\u064a\u064a\u064a\u064a\u0644 \u0627\u0644\u0644\u0647\u0645 \u0635\u0644 \u0639\u0644\u0649 \u0645\u062d\u0645\u062f \u0648\u0639\u0644\u0649 \u0622\u0644\u0647 \u0648\u0635\u062d\u0628\u0647 \u0648\u0633\u0644\u0645\n[7] - [0]\n35 \u062c\u0627\u0645\u0639\u064a\u0647 \u0648\u0639\u0627\u0637\u0644\u0647 15 \u0633\u0646\u0647\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 10:03 AM\n\u0627\u062d\u0633\u0646\n\u0627\u0644\u0644\u0647 \u064a\u062c\u0639\u0644\u0647\u0645  \u0645\u0646 \u0633\u064a\u0649\u0621  \u0644\u0623\u0633\u0648\u0627\u0621\n\u062a\u0643\u0641\u0648\u0646 \u0627\u0646\u0627 \u0645\u0627 \u0627\u0639\u0631\u0641 \u0627\u0642\u0627\u0637\u0639\u0647  \u0643\u064a\u0641 \u061f\u061f\u061f\n\u0648\u0647\u0644 \u0644\u0647 \u0628\u062f\u064a\u0644 \u061f\u061f\u061f\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 10:09 AM\n\u0637\u064a\u0628 \u0643\u064a\u0641 \u0627\u062f\u062e\u0644 \u0639\u0644\u0649 \u0635\u062d\u064a\u0641\u0629 \u0633\u0628\u0642\n[1] - [4]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 10:10 AM\n\u0627\u0644\u0649 \u0627\u0633\u0641\u0644 \u0627\u0644\u0633\u0627\u0641\u0644\u064a\u0646 \u0627\u0646 \u0634\u0627\u0621 \u0627\u0644\u0644\u0647 \u0627\u0644\u0649  \u0627\u0633\u0641\u0644 \u0627\u0644\u0633\u0627\u0641\u0644\u064a\u0646\n[10] - [0]\n38 \u0643\u0627\u0634\u0641 \u0627\u0633\u0631\u0627\u0631 \u0627\u0644\u0641\u0633\u0627\u062f\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 10:10 AM\n\u0627\u0637\u0627\u0644\u0628 \u0643\u0644 \u0645\u0633\u0644\u0645 \u063a\u064a\u0631\u0648 \u0639\u0644\u0649 \u062f\u064a\u0646\u0647 \u0648 \u0631\u0633\u0648\u0644 \u0627\u0644\u0644\u0647 \u0627\u0646 \u062a\u0633\u062a\u0645\u0631 \u0627\u0644\u0645\u0642\u0627\u0637\u0639\u0647 \u062d\u062a\u0649 \u062a\u0639\u0644\u0645 \u0642\u0648\u0642\u0644 \u0627\u0646\u0646\u0627 \u0644\u0633\u0646\u0627 \u0628\u062d\u0627\u062c\u0647 \u0644\u0647\u0645 \u0648 \u0646\u062c\u0639\u0644\u0647\u0645 \u064a\u0630\u0648\u0642\u0648\u0627 \u0627\u0644\u062e\u0633\u0627\u0631\u0647 \u0644\u0643\u064a \u064a\u062d\u062a\u0631\u0645\u0648\u0646 \u0631\u0633\u0648\u0644\u0646\u0627 \u0648\u062f\u064a\u0646\u0646\u0627 \u0648\u064a\u0639\u0644\u0645\u0648\u0627\u0646 \u0628\u0623\u0646 \u0646\u062d\u0646 \u0645\u0633\u0644\u0645\u0648\u0646 \u0644\u0633\u0646\u0627 \u0636\u0639\u0641\u0627\u0621 \u0639\u0646\u062f\u0645\u0627 \u0646\u062a\u0648\u062d\u062f \u0644\u0627 \u0646\u062c\u0627\u0645\u0644\u0647\u0645\n[9] - [0]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 10:08 AM\n\u064a\u0633\u062a\u0627\u0647\u0644 \u0627\u0644\u062d\u0645\u062f \u0644\u0644\u0647 \u0627\u0646\u0627 \u0648\u0644 \u0627\u0644\u0645\u0642\u0627\u0637\u0639\u064a\u0646 \u0627\u0644\u0644\u0647\u0645 \u0644\u0643 \u0627\u0644\u062d\u0645\u062f\n[6] - [0]\n40 \u0643\u0627\u0634\u0641 \u0627\u0633\u0631\u0627\u0631 \u0627\u0644\u0641\u0633\u0627\u062f\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 10:07 AM\n\u0648\u0627\u0646\u0627 \u0645\u0646 \u0648\u0635\u0644\u0646\u064a \u062d\u0645\u0644\u0629 \u0627\u0644\u0645\u0642\u0627\u0637\u0639\u0647 \u0641\u0648\u0631\u0627 \u0642\u0645\u062a \u0628\u062d\u0630\u0641 \u0635\u0641\u062d\u0629 \u0642\u0648\u0642\u0644 \u0648\u0627\u0633\u062a\u062e\u062f\u0645 \u0645\u062d\u0631\u0643\u0627\u062a \u0628\u062d\u062b Bing \u0648 Dailymotion \u0648 yahoo\n[10] - [0]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 10:07 AM\n\u0643\u0641\u0648 \u0648\u0627\u0644\u0642\u0627\u062f\u0645 \u0627\u0643\u062b\u0631 \u0627\u0646 \u0634\u0627\u0621 \u0627\u0644\u0644\u0647\n\u064a\u0632\u0639\u0645\u0648\u0646 \u062d\u0631\u064a\u0629 \u0627\u0644\u062a\u0639\u0628\u064a\u0631 \u0627\u0630\u0627 \u0644\u0627 \u064a\u0648\u062c\u062f \"\u0645\u062d\u0631\u0642\u0647 \u0644\u0644\u064a\u0647\u0648\u062f\"\n[10] - [0]\n10 \u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629 1433 | 10:06 AM\n\u0627\u0644\u0644\u0647\u0645 \u0644\u0643 \u0627\u0644\u062d\u0645\u062f\n"
                 ]:
        logger.info(u"Lang of \"" + text[:300].replace("\n", "") + u"\" is " + unicode(ld.detect(text)))

    for u in ["http://moslim.ca/?p=257", "http://subscribe.ru/group/rukodelie/2757256/?utm_source=twitterfeed&utm_medium=twitter"]:
        extractor = Extractor(extractor='ArticleExtractor', url=u)
        text = extractor.getText()
        logger.info(u"Lang of \"" + u + u"\" is " + unicode(ld.detect(text)))
